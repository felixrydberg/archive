var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},s={},n=e.parcelRequiree3e6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in s){var n=s[e];delete s[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){s[e]=t},e.parcelRequiree3e6=n);var a=n("fC0jS"),r=n("8tedJ");a=n("fC0jS"),r=n("8tedJ");class i{constructor(e,t,s,n,a){this.username=e,this.title=t,this.message=s,this.uid=n,this.timestamp=void 0===a?(new Date).toLocaleString("sv-SE"):a}}const o=e=>{const t=sessionStorage.getItem("name"),s=document.createElement("div");s.classList.add("form-container");const n=document.createElement("form");n.setAttribute("id",`${e}`),n.classList.add("post-forms");const a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("name","title"),a.setAttribute("id","title"),a.setAttribute("placeholder","Add a title.. (min 5 characters)"),a.required=!0;const r=document.createElement("textarea");r.setAttribute("name","message"),r.setAttribute("id","message"),r.setAttribute("maxlength","500"),r.setAttribute("form",e),r.setAttribute("cols","10"),r.setAttribute("rows","10"),r.setAttribute("placeholder","Write something interesting.. (max 500 char length) ");const i=document.createElement("input");i.setAttribute("type","submit"),i.setAttribute("value","Post Message"),n.addEventListener("submit",(s=>{s.preventDefault(),""!==r.value&&r.value.length<=500&&""!==a.value&&a.value.length>=5&&(l({username:t,title:a.value,message:r.value,category:e}),r.value="",a.value=""),r.value.length>500&&(r.style.borderBlockColor="red"),a.value.length<5&&(a.style.borderBlockColor="red")}));const o=document.createElement("input");return o.setAttribute("type","reset"),o.setAttribute("value","Cancel"),n.appendChild(a),n.appendChild(r),n.appendChild(i),n.appendChild(o),s.append(n),s},l=e=>{const t=r.ref(a.db,`/posts/${e.category}`),s=r.push(t).key,n=new i(e.username,e.title,e.message,s),o={};o[s]=n,r.update(t,o)},d=e=>{const t=[];for(const s in e.val()){const{username:n,uid:a,title:r,timestamp:o,message:l}=e.val()[s];t.push(new i(n,r,l,a,o))}return t.reverse()},c=(e,t,s)=>{const{username:n,uid:i,title:o,timestamp:l,message:d}=e,c=document.createElement("div"),u=document.createElement("div"),m=document.createElement("h5"),p=document.createElement("p"),g=document.createElement("p"),f=document.createElement("p"),h=document.createElement("p");if(c.classList.add("message-wrapper"),p.innerText=`postid: #${i}`,p.classList.add("post-id"),m.innerText=`Title: ${o}`,m.classList.add("post-title"),g.innerHTML=`Poster:<a href=""> ${n}</a> (click to show profile)`,g.classList.add("poster"),g.addEventListener("click",(e=>{e.preventDefault(),sessionStorage.setItem("profile",n),window.location.replace("profile.html")})),f.innerText=`Posted: ${l}`,f.classList.add("timestamp"),h.innerText=d,h.classList.add("post"),u.appendChild(p),u.appendChild(m),u.appendChild(g),u.appendChild(f),c.appendChild(u),c.append(h),t===n){const e=document.createElement("button");e.classList.add("remove-btn"),e.innerText="Delete Post",e.addEventListener("click",(e=>{e.preventDefault(),r.remove(r.ref(a.db,`/posts/${s}/${i}`))})),c.append(e)}return c};(()=>{const e=r.ref(a.db,"/posts");r.onValue(e,(e=>(()=>{const e=document.querySelector("main"),t=sessionStorage.getItem("name"),s=sessionStorage.getItem("category");for(;e.hasChildNodes();)e.removeChild(e.firstChild);r.get(r.ref(a.db,`/posts/${s}`)).then((n=>{const a=document.createElement("article");a.classList.add("category-wrapper");const r=document.createElement("h2");if(r.classList.add("category-title"),e.prepend(r),r.innerText=`No data is available for category ${s}`,sessionStorage.getItem("login")&&a.appendChild(o(s)),n.exists()){r.innerText=s.toUpperCase();const e=d(n);sessionStorage.getItem("login")&&e.forEach((e=>{const{username:n,uid:r,title:i,timestamp:o,message:l}=e;a.appendChild(c({username:n,uid:r,title:i,timestamp:o.toString(),message:l},t,s))}))}e.appendChild(a)}))})())),function(){if(sessionStorage.getItem("login")){document.getElementById("profile").addEventListener("click",(e=>{e.preventDefault(),sessionStorage.setItem("profile",sessionStorage.getItem("name").toLowerCase()),window.location.replace("./profile.html")})),document.querySelector("#signinbtn").style.display="none",document.querySelector("#signupbtn").style.display="none",document.querySelector("#profile").style.display="block";let e=document.querySelector("#logoutbtn");e.style.display="block",e.addEventListener("click",(()=>{sessionStorage.clear(),location.reload()}))}}()})();
//# sourceMappingURL=forum.c3a48231.js.map
