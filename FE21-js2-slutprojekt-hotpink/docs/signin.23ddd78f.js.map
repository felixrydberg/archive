{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,UAGC,YCHc,WACb,GAAIC,eAAeC,QAAQ,SAAU,CAEnCC,SACGC,eAAe,WACfC,iBAAiB,SAAUC,IAC1BA,EAAEC,iBACFN,eAAeO,QACb,UACAP,eAAeC,QAAQ,QAAQO,eAEjCC,OAAOC,SAASC,QAAQ,qBAGOT,SAASU,cAAc,cAChDC,MAAMC,QAAU,OAGSZ,SAASU,cAAc,cAChDC,MAAMC,QAAU,OAGUZ,SAASU,cAAc,YAChDC,MAAMC,QAAU,QAG3B,IAAIC,EAA+Bb,SAASU,cAAc,cAC1DG,EAAUF,MAAMC,QAAU,QAC1BC,EAAUX,iBAAiB,SAAS,KAClCJ,eAAegB,QACfN,SAASO,aDzBZC,GAI2BhB,SAASU,cAAc,gBAE5CR,iBAAiB,UAAWe,IAC/BA,EAAMb,iBAEN,MAAMc,EAAyBlB,SAASU,cAAc,cAChDS,EAAwBnB,SAASU,cAAc,aAErDU,EAAUF,EAAKG,MAAMf,cAAea,EAAIE,UAK1C,MAAID,EAAYE,MAAOJ,EAAMC,WACjBvB,EAAA2B,cAAcL,SAETtB,EAAA4B,SAASN,EAAMC,GAC9BM,QAAQC,IAAI,8BAEZD,QAAQC,IAAI,SACZC,EAAUT,IALVO,QAAQC,IAAI,uBAUVC,EAAaT,IACjBpB,eAAegB,QACfhB,eAAeO,QAAQ,QAAS,QAChCP,eAAeO,QAAQ,OAAQa,GAE/BX,OAAOC,SAASC,QAAQ,iBApC3B","sources":["src/script/signin.ts","src/script/modules/navtoggle.ts"],"sourcesContent":["import { checkPwd, userAvailable } from './modules/signfunctions';\r\nimport navToggle from './modules/navtoggle';\r\n\r\n(function () {\r\n  // Gömmer och visar specifika knappar i naven\r\n  navToggle();\r\n\r\n  // Sätter Addeventlistner på Formen\r\n  (function () {\r\n    const form: HTMLElement = document.querySelector('.form-signin');\r\n\r\n    form.addEventListener('submit', (event) => {\r\n      event.preventDefault();\r\n\r\n      const name: HTMLInputElement = document.querySelector('.form-name');\r\n      const pwd: HTMLInputElement = document.querySelector('.form-pwd');\r\n\r\n      checkUser(name.value.toLowerCase(), pwd.value);\r\n    });\r\n  })();\r\n\r\n  // Kollar om användaren uppfyller x antal krav och om lösenord matchar\r\n  const checkUser = async (name, pwd) => {\r\n    if (!(await userAvailable(name))) {\r\n      console.log('User doesnt exsist');\r\n    } else if (await checkPwd(name, pwd)) {\r\n      console.log('pwd doesnt match username');\r\n    } else {\r\n      console.log('login');\r\n      loginUser(name);\r\n    }\r\n  };\r\n\r\n  // Skapar session variablerna och skickar användaren till index.html\r\n  const loginUser = (name) => {\r\n    sessionStorage.clear();\r\n    sessionStorage.setItem('login', 'true');\r\n    sessionStorage.setItem('name', name);\r\n\r\n    window.location.replace('./index.html');\r\n  };\r\n})();\r\n","export default function navToggle(): void {\r\n  if (sessionStorage.getItem('login')) {\r\n    // Added clickelement on profile button, which captures login username into profile storage and reroutes to profile\r\n    document\r\n      .getElementById('profile')\r\n      .addEventListener('click', (e: MouseEvent): void => {\r\n        e.preventDefault();\r\n        sessionStorage.setItem(\r\n          'profile',\r\n          sessionStorage.getItem('name').toLowerCase()\r\n        );\r\n        window.location.replace('./profile.html');\r\n      });\r\n\r\n    let btnsignIn: HTMLAnchorElement = document.querySelector('#signinbtn');\r\n    btnsignIn.style.display = 'none';\r\n\r\n    // Slutar visa signup om man är inloggad\r\n    let btnsignUp: HTMLAnchorElement = document.querySelector('#signupbtn');\r\n    btnsignUp.style.display = 'none';\r\n\r\n    // Om man är inloggad visas denna knapp.\r\n    let profilebtn: HTMLAnchorElement = document.querySelector('#profile');\r\n    profilebtn.style.display = 'block';\r\n\r\n    // Om man är inloggad visas denna knapp. Om man trycker på den tas variabler i SessionStorage bort och sidan laddas om\r\n    let btnlogout: HTMLAnchorElement = document.querySelector('#logoutbtn');\r\n    btnlogout.style.display = 'block';\r\n    btnlogout.addEventListener('click', () => {\r\n      sessionStorage.clear();\r\n      location.reload();\r\n    });\r\n  }\r\n}\r\n"],"names":["$l5TZ6","parcelRequire","sessionStorage","getItem","document","getElementById","addEventListener","e","preventDefault","setItem","toLowerCase","window","location","replace","querySelector","style","display","btnlogout","clear","reload","$b0cfc8d9550b1f45$export$2e2bcd8739ae039","event","name","pwd","checkUser","value","async","userAvailable","checkPwd","console","log","loginUser"],"version":3,"file":"signin.23ddd78f.js.map"}